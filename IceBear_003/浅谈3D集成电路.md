---
title: 浅谈3D集成电路
description: 
published: true
date: 2024-09-05T07:12:03.703Z
tags: 前沿, 工艺, 数字
editor: markdown
dateCreated: 2024-08-30T16:42:41.932Z
---

## 3D集成简介

由于近年来相关工艺发展趋缓，晶体管尺寸已经接近物理学极限，传统基于平面上的数字集成电路性能受制于芯片的面积、功耗等因素，尤其是“功耗墙”、“内存墙”。为了进一步提升芯片性能，3D集成的概念被提出，即将电路按照一定规则分层放置，不同层之间通过过孔传输信号。3D集成技术突破了芯片发展的瓶颈，从而维持了数字集成电路的高速发展。

## 3D集成工艺

目前3D集成较多采用TSV（Through-Silicon Via）技术。TSV技术指将预制好的平面芯片垂直层叠，每层之间加入硅片，在硅片上通孔以实现不同电路层的连接。由于层与层之间厚度大，且难以散热，TSV技术不适合复杂的3D集成。

相比之下，新兴的M3D（Monolithic 3D）技术在单一硅片上逐层完成电路的搭建，显著降低了不同电路层之间的厚度，比TSV小1~2个数量级，减少了层间信号的延迟，适用于庞大复杂的设计。同时，M3D技术加工的芯片由于热在垂直方向上传导快，有较好的散热性能。最重要的是，M3D芯片中的层间过孔MIV（Monolithic Interlayer Via）直径远小于TSV（1~2个数量级），大幅降低3D集成电路的占用空间，为细粒划分等复杂设计提供了条件。

无论是哪种工艺，本质上都是多层平面叠加在一起，平面与平面之间存在带有过孔的夹层，类似于多层PCB的结构。而层内、层间的布线都可在相应的EDA中自动化排布，科研工作者们需要探究的不仅有如何将系统设计成多层的三维结构，还有该如何进行这样的设计，让最终结果具有更好的性能（面积更小、功耗更低、散热更好等），并得到三维集成电路设计的基本规律、优化技巧。

## 设计

虽然3D集成相比传统2D集成提升了一个维度，但是其设计过程并没有发生非常大的改变，因为每一层内的电路仍然是普通的2D集成，只需要额外考虑层间过孔。设计3D数字集成电路时，一般从传统的平面结构出发，将整个系统进行合理的分割，排布到不同层，以下是一些分割的思路。

### 按规模（大小等级）分割

> **晶体管级**：将N-type和P-type的晶体管分开来，放置于不同层。
> 优点：对不同层不同类型的晶体管进行独立的优化，两层间无需金属夹层。
> 缺点：需要重新设计晶体管以迎合分割模式，每对晶体管都需要一个过孔，占用面积提升10%~20%。

> **门级/亚块级**：对逻辑块、内存块内部进行分割，块内的不同门可能处于相同层/不同层。
> 优点：可以使用现成的标准CMOS库进行设计，小幅度减少层间过孔的数量，大幅度降低芯片占用空间，提升关键路径的性能。
> 缺点（个人意见）：设计者需要对每个模块都进行相应的分割优化，工作量较大。
>
> 例1、SRAM阵列可在门级被分割，将庞大的译码器、多选器和大量的存储单元分层放置，将存储单元分为多个部分分层放置，将不同读写端口分层放置。这样可以优化SRAM结构的读写延迟、功耗和占用面积（优化程度受数据结构本身的参数和规模影响）。

> **块级**：按照块的功能进行分割
> 优点：具有和门级分割相似的优点，线长优化（不如门级分割），具有最少的过孔数量。
> 缺点：由于分割的粒度过大，使得设计灵活性降低，对关键路径几乎没有优化。
>
> 例1、TSV工艺下的3D集成，因为TSV过孔直径较大，同样的面积内只能容忍非常少的过孔数量，此时过孔少对应的块级分割较为合适。卷积神经网络CNN的三维集成电路中即可使用块分割+TSV的方案。
>
> 例2、总线结构的NoC在三维层面上可被折叠，即总线每处都与上下两个核连接，长度至少可减少一半。
>
> 例3、在三维加速CPU结构中，插入FDR层实现硬件加速效果，FDR和核心在底层通过L2总线/Crossbar连接到中间的L2 Cache层，L2 Cache与顶层的RRAM通过MSHR模块交互。

### 基于M3D工艺各层异质性的分割思路

由于M3D工艺要求三维芯片被从下至上逐层加工，加工上层释放的大量的热可能会破坏下层的结构。使用laser-scan技术可避免这个问题，这降低了上层的加工温度（不会对下层造成破坏），但牺牲了一部分上层的性能。

因此M3D加工得到的3D集成电路上下层在性能、材料方面都有区别，可描述为各层的“异质性”，下层晶体管一般较小，性能高，上层晶体管较大，性能稍低。在对系统进行分割时，尤其是门级/亚块级分割时，需要考虑、利用“异质性”。

> 以门级/亚块级分割为例，具体的策略有：
>
> - 逻辑结构
>   - 块内关键路径置于下层（性能高，降低延时），非关键路径置于上层（性能稍低但无关紧要）。e.g. 基于超前进位原理的64位加法器，从最低的进位传播到最高的加和结果的路径最长，将其至于下层，减少该关键路径的延迟。
> - 存储结构
>   - 端口分割（PP）：将读写端口非对称地分割于不同层，上层使用较大的晶体管
>   - 位/字分割（BP/WP）：将SRAM所有存储单元非对称地分割于不同层，更多的存储单元放置于底层
> - 混合结构
>   - 同时采用上面两种结构的分割策略

# 还没写完